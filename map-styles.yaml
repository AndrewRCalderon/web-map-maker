# Define colors up here, split up by feature type for convenience
quiet-la-colors:
    text:
        - &text             '#757575'
    areas:
        - &background       '#efebe7'
        - &land             '#f4f2ed'
        - &forest           '#dee0d5'
        - &grass            '#dee0d5'   # lighten(@forest, 5%)
        - &park             '#dee0d5'   # lighten(@forest, 3%)
        - &hospital         '#f1e2ee'
        - &school           '#d9d5e3'
        - &stadium          '#d9cdc1'
        - &beach            '#ebe2cd'
        - &runway           '#bfbebd'
        - &aerodrome        '#d6d6d6'
        - &building         '#9e9e9e'   # darken(#e8e4e4,8)
        - &water            '#c3d5dd'
        - &residential      '#f4f2ed'   # @land * 0.98
        - &commercial       '#f4f2ed'   # @land * 0.97
        - &industrial       '#f4f2ed'   # @land * 0.96
        - &military         '#f4f2ed'   # @land * 0.95
        - &parking          '#eeeeee'
        - &place_of_worship '#E3C5C9'
        - &admin            '#000000'
    borders:
        - &county_brdr      '#8a7c7c'
        - &california_brdr  '#827676'
        - &mexico_brdr      '#6E6666'
    roads:
        - &road             '#c8c8c1'
        - &road_text        '#757575'
        - &rail_line        '#c8c8c1'
        - &aeroway          '#dddddd'

camera:
    type: isometric
    axis: [0, .1] # very small building extrusion

lights:
    light1:
        type: directional
        direction: [0, 1, -.5]
        diffuse: .3
        ambient: 1

sources:
    osm:
        type: TopoJSON
        url:  //vector.mapzen.com/osm/all/{z}/{x}/{y}.topojson?api_key=vector-tiles---JwESU

layers:
    earth:
        data: { source: osm, layer: earth }
        draw:
            polygons:
                order: function() { return feature.sort_key; }
                color: *background

    water:
        data: { source: osm, layer: water }
        draw:
            polygons:
                order: function() { return feature.sort_key; }
                color: *water

    landuse:
        data: { source: osm }
        draw:
            polygons:
                order: function() { return feature.sort_key; }
                color: '#cccccc'
        arena:
            filter: {kind: arena}
            draw:
                polygons:
                    color: *stadium
        beach:
            filter: {kind: beach}
            draw:
                polygons:
                    color: *beach
        cemetery:
            filter: {kind: cemetery}
            draw:
                polygons:
                    color: *park
        college:
            filter: {kind: college}
            draw:
                polygons:
                    color: *school
        commercial:
            filter: {kind: commercial}
            draw:
                polygons:
                    color: *commercial
        dog_park:
            filter: {kind: dog_park}
            draw:
                polygons:
                    color: *park
        common:
            filter: {kind: common}
            draw:
                polygons:
                    color: *park
        forest:
            filter: {kind: forest}
            draw:
                polygons:
                    color: *forest
        garden:
            filter: {kind: garden}
            draw:
                polygons:
                    color: *park
        golf_course:
            filter: {kind: golf_course}
            draw:
                polygons:
                    color: *park
        grass:
            filter: {kind: grass}
            draw:
                polygons:
                    color: *grass
        hospital:
            filter: {kind: hospital}
            draw:
                polygons:
                    color: *hospital
        industrial:
            filter: {kind: industrial}
            draw:
                polygons:
                    color: *industrial
        recreation_ground:
            filter: {kind: recreation_ground}
            draw:
                polygons:
                    color: *park
        kindergarten:
            filter: {kind: kindergarten}
            draw:
                polygons:
                    color: *school
        military:
            filter: {kind: military}
            draw:
                polygons:
                    color: *military
        park:
            filter: {kind: park}
            draw:
                polygons:
                    color: *park
        university:
            filter: {kind: university}
            draw:
                polygons:
                    color: *school

    roads:
        data: { source: osm }
        filter:
            not: { kind: ["path", "rail"] }
        draw:
            lines:
                order: function() { return feature.sort_key; }
                color: '#c8c8c1'
                width: 8
                cap: round
        highway:
            filter:
                kind: highway
            draw:
                lines:
                    order: function() { return feature.sort_key; }
                    color: '#c8c8c1'
                    width: 12
                    outline:
                        color: grey
                        width: 1.5
        minor_road:
            filter:
                kind: minor_road
            draw:
                lines:
                    order: function() { return feature.sort_key; }
                    color: lightgrey
                    width: 5

    buildings:
        data: { source: osm }
        draw:
            polygons:
                order: function() { return feature.sort_key; }
                color: *building

        3d-buildings:
            filter: { $zoom: { min: 15 } }
            draw:
                polygons:
                    extrude: function () { return feature.height > 20 || $zoom >= 16; }